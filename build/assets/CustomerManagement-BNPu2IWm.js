import{r as l,s as g,j as e,S as Q,I as m,T as I,B as j,t as o}from"./index-V23vquzg.js";import{A as q}from"./arrow-left-BzwCOdhx.js";import{P as G}from"./plus-W1R3slHK.js";import{F as K}from"./funnel-D0geSq6i.js";import{D as _}from"./download-CYNHsznw.js";import{M as J}from"./message-circle-Cp6kwdTm.js";import{P as y}from"./phone-D4oWvoMl.js";import{M as C}from"./mail-Bk8MmZnr.js";import{M as L}from"./map-pin-BcRStWuN.js";import{C as Y}from"./calendar-97M8omus.js";import{S as Z}from"./square-pen-C0nwl_1g.js";import{T as ee}from"./trash-2-JdIgAFQB.js";import{S as se}from"./shopping-bag-QpmoBfiG.js";function pe({onNavigate:X}){const[N,D]=l.useState(""),[t,b]=l.useState(null),[R,h]=l.useState(!1),[n,u]=l.useState([]),[i,p]=l.useState("all"),[S,B]=l.useState(!1),[f,k]=l.useState(""),[v,E]=l.useState(""),[P,A]=l.useState(""),[V,F]=l.useState("");l.useEffect(()=>{const s=g.getCustomers();if(s.length>0)u(s);else{const a=[{id:"1",name:"Ramesh Kumar",phone:"+91 98765 43210",email:"ramesh@email.com",address:"Shop 12, Main Market, Delhi",totalPurchases:45,totalSpent:12500,lastVisit:"2024-11-13",visits:45,status:"vip"},{id:"2",name:"Sunita Devi",phone:"+91 98765 43211",address:"House 23, Green Colony",totalPurchases:28,totalSpent:8900,lastVisit:"2024-11-12",visits:28,status:"regular"},{id:"3",name:"Priya Sharma",phone:"+91 98765 43212",email:"priya@email.com",totalPurchases:12,totalSpent:3400,lastVisit:"2024-11-11",visits:12,status:"regular"},{id:"4",name:"Vijay Singh",phone:"+91 98765 43213",totalPurchases:3,totalSpent:850,lastVisit:"2024-11-10",visits:3,status:"new"}];u(a),g.setCustomers(a)}},[]);const O=()=>{if(!f.trim()){o.error("Please enter customer name");return}if(!v.trim()){o.error("Please enter phone number");return}const s={id:Date.now().toString(),name:f.trim(),phone:v.trim(),email:P.trim()||void 0,address:V.trim()||void 0,totalPurchases:0,totalSpent:0,lastVisit:new Date().toISOString().split("T")[0],visits:0,status:"new"},a=[...n,s];u(a),g.setCustomers(a),k(""),E(""),A(""),F(""),h(!1),o.success(`${s.name} added successfully! ðŸŽ‰`)},U=s=>{const a=n.find(c=>c.id===s);if(a&&confirm(`Delete ${a.name}?`)){const c=n.filter(d=>d.id!==s);u(c),g.setCustomers(c),b(null),o.success("Customer deleted")}},W=()=>{const s=[["Name","Phone","Email","Address","Total Purchases","Total Spent","Last Visit","Status"],...n.map(r=>[r.name,r.phone,r.email||"",r.address||"",r.totalPurchases,r.totalSpent,r.lastVisit,r.status])].map(r=>r.join(",")).join(`
`),a=new Blob([s],{type:"text/csv"}),c=URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=`customers_${new Date().toISOString().split("T")[0]}.csv`,d.click(),o.success("Customer list exported!")},z=()=>{`${localStorage.getItem("storeName")||"Retail Bandhu"}`,o.success(`WhatsApp blast ready for ${x.length} customers!`,{duration:3e3})},T={vip:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",regular:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",new:"bg-gradient-to-r from-green-500 to-green-600 text-white"},M={vip:"â­",regular:"ðŸ‘¤",new:"ðŸ†•"};let x=n.filter(s=>s.name.toLowerCase().includes(N.toLowerCase())||s.phone.includes(N));i!=="all"&&(x=x.filter(s=>s.status===i));const H=n.length,w=n.filter(s=>s.status==="vip").length,$=n.reduce((s,a)=>s+a.totalSpent,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1E88E5]/5 to-[#FF6F00]/5 pb-24",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#1E88E5] to-[#FF6F00] p-6 rounded-b-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>X("dashboard"),className:"text-white",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-white text-xl",children:"Customer Management"}),e.jsx("button",{onClick:()=>h(!0),className:"text-white",children:e.jsx(G,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-white/90 text-center",children:"Apne customers ko manage karein"})]}),e.jsxs("div",{className:"px-6 pt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-3 text-center",children:[e.jsx("p",{className:"text-2xl text-[#1E88E5] mb-1",children:H}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Total Customers"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-3 text-center",children:[e.jsx("p",{className:"text-2xl text-yellow-600 mb-1",children:w}),e.jsx("p",{className:"text-gray-600 text-xs",children:"VIP Customers"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-3 text-center",children:[e.jsxs("p",{className:"text-lg text-green-600 mb-1",children:["â‚¹",$.toLocaleString()]}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Total Revenue"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(m,{type:"text",placeholder:"Search by name or phone...",value:N,onChange:s=>D(s.target.value),className:"pl-12 h-12 bg-white border-gray-200 rounded-xl"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>B(!S),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${S?"bg-blue-600 text-white":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"Filter"]}),e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-2 rounded-lg text-xs transition-all ${i==="all"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All (",n.length,")"]}),e.jsxs("button",{onClick:()=>p("vip"),className:`px-3 py-2 rounded-lg text-xs transition-all ${i==="vip"?"bg-yellow-600 text-white":"bg-yellow-50 text-yellow-700 hover:bg-yellow-100"}`,children:["â­ VIP (",w,")"]}),e.jsx("button",{onClick:()=>p("regular"),className:`px-3 py-2 rounded-lg text-xs transition-all ${i==="regular"?"bg-blue-600 text-white":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:"Regular"}),e.jsx("button",{onClick:()=>p("new"),className:`px-3 py-2 rounded-lg text-xs transition-all ${i==="new"?"bg-green-600 text-white":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:"ðŸ†• New"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 bg-green-50 text-green-600 rounded-lg text-sm hover:bg-green-100 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg text-sm hover:shadow-md transition-all",children:[e.jsx(J,{className:"w-4 h-4"}),"Bulk WhatsApp"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-gray-900",children:["All Customers (",x.length,")"]}),x.map(s=>e.jsxs("div",{onClick:()=>b(s),className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-gray-900",children:s.name}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${T[s.status]}`,children:[M[s.status]," ",s.status.toUpperCase()]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[e.jsx(y,{className:"w-3 h-3 mr-2"}),s.phone]}),s.email&&e.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[e.jsx(C,{className:"w-3 h-3 mr-2"}),s.email]}),s.address&&e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx(L,{className:"w-3 h-3 mr-2"}),s.address]})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#1E88E5]",children:s.totalPurchases}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Purchases"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-green-600",children:["â‚¹",s.totalSpent.toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Spent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600",children:s.visits}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Visits"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Last visit: ",s.lastVisit]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-[#1E88E5] hover:bg-blue-50 p-2 rounded-lg transition-colors",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",onClick:()=>U(s.id),children:e.jsx(ee,{className:"w-4 h-4"})})]})]})]},s.id))]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"Customer Insights"}),e.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Aapke VIP customers average â‚¹",($/w).toFixed(0)," kharch karte hain. Inhe special offers bhejkar retention badhayein!"]})]})]})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl text-gray-900",children:"Add New Customer"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700 text-sm mb-2 block",children:"Customer Name *"}),e.jsx(m,{type:"text",placeholder:"Enter name",className:"h-12",value:f,onChange:s=>k(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700 text-sm mb-2 block",children:"Phone Number *"}),e.jsx(m,{type:"tel",placeholder:"+91 XXXXX XXXXX",className:"h-12",value:v,onChange:s=>E(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700 text-sm mb-2 block",children:"Email (Optional)"}),e.jsx(m,{type:"email",placeholder:"customer@email.com",className:"h-12",value:P,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700 text-sm mb-2 block",children:"Address (Optional)"}),e.jsx(m,{type:"text",placeholder:"Enter address",className:"h-12",value:V,onChange:s=>F(s.target.value)})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx(j,{onClick:()=>h(!1),className:"flex-1 bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancel"}),e.jsx(j,{onClick:O,className:"flex-1 bg-gradient-to-r from-[#1E88E5] to-[#FF6F00]",children:"Add Customer"})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl text-gray-900",children:t.name}),e.jsx("button",{onClick:()=>b(null),className:"text-gray-400",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`px-4 py-2 rounded-xl ${T[t.status]} inline-block`,children:[M[t.status]," ",t.status.toUpperCase()," Customer"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(y,{className:"w-5 h-5 mr-3 text-[#1E88E5]"}),t.phone]}),t.email&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(C,{className:"w-5 h-5 mr-3 text-[#1E88E5]"}),t.email]}),t.address&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(L,{className:"w-5 h-5 mr-3 text-[#1E88E5]"}),t.address]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx(se,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-2xl text-blue-600 mb-1",children:t.totalPurchases}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Purchases"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx(I,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}),e.jsxs("p",{className:"text-2xl text-green-600 mb-1",children:["â‚¹",t.totalSpent.toLocaleString()]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Spent"})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"Purchase History"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Last Visit"}),e.jsx("span",{className:"text-gray-900",children:t.lastVisit})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Visits"}),e.jsxs("span",{className:"text-gray-900",children:[t.visits," times"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Avg. Spend"}),e.jsxs("span",{className:"text-gray-900",children:["â‚¹",(t.totalSpent/t.totalPurchases).toFixed(0)]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{className:"flex-1 bg-gradient-to-r from-green-500 to-green-600",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Call"]}),e.jsxs(j,{className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Message"]})]})]})]})})]})}export{pe as CustomerManagement};
