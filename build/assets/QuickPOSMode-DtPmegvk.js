import{c as H,r as o,j as e,B as a,a as F,C as u,S as J,I as v,e as Q,X as B,t as d,b as K}from"./index-BuzVCwG6.js";import{C as V}from"./chevron-left-BxM-u5rR.js";import{S as Y}from"./scan-D43DpCqZ.js";import{T as Z}from"./trash-2-TQVF2hbq.js";import{P as ee}from"./plus-DQq0th4a.js";import{C as D}from"./credit-card-593Rm7eN.js";import{W as se}from"./wallet-WIVTy8zD.js";import{S as te}from"./smartphone-CnWwc8e1.js";import{I as ae}from"./indian-rupee-CBtXWVuN.js";import{C as L}from"./circle-check-BX-EyD5C.js";import{P as le}from"./printer-cL35Pv_R.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M5 12h14",key:"1ays0h"}]],ce=H("minus",re);function be({onNavigate:l,products:r}){const[t,c]=o.useState([]),[m,N]=o.useState(""),[p,g]=o.useState("all"),[j,x]=o.useState("cash"),[E,w]=o.useState(!1),[O,I]=o.useState(!1),[q,C]=o.useState(""),[k,S]=o.useState(0),[b,P]=o.useState(0),U=["all",...new Set(r.map(s=>s.category).filter(Boolean))],R=r.filter(s=>{const n=p==="all"||s.category===p,f=!m||s.name.toLowerCase().includes(m.toLowerCase());return n&&f&&s.stock>0}),z=t.reduce((s,n)=>s+n.total,0),A=z*b/100,h=z-A,M=k-h,W=s=>{if(s.stock===0){d.error("Product out of stock!");return}const n=t.find(f=>f.product.id===s.id);if(n){if(n.quantity>=s.stock){d.error("Not enough stock!");return}T(s.id,1)}else c([...t,{product:s,quantity:1,total:s.price}]),d.success(`${s.name} added to cart`)},T=(s,n)=>{c(f=>f.map(i=>{if(i.product.id===s){const y=i.quantity+n;return y<=0?i:y>i.product.stock?(d.error("Not enough stock!"),i):{...i,quantity:y,total:y*i.product.price}}return i}).filter(i=>i.quantity>0))},_=s=>{c(t.filter(n=>n.product.id!==s)),d.info("Item removed from cart")},$=()=>{confirm("Clear entire cart?")&&(c([]),P(0),C(""),d.info("Cart cleared"))},X=()=>{if(t.length===0){d.error("Cart is empty!");return}S(h),w(!0)},G=()=>{if(j!=="credit"&&k<h){d.error("Insufficient payment amount!");return}w(!1),I(!0),setTimeout(()=>{I(!1),c([]),P(0),C(""),S(0),d.success("Transaction completed!")},3e3)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-3 sticky top-0 z-10 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{onClick:()=>l("dashboard"),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Quick POS"}),e.jsx("p",{className:"text-xs text-white/90",children:"Fast Checkout"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{className:"bg-white text-purple-600",children:[t.length," items"]}),e.jsx(a,{onClick:()=>l("barcode-scanner"),size:"sm",className:"bg-white text-purple-600 hover:bg-purple-50 h-8",children:e.jsx(Y,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-60px)]",children:[e.jsxs("div",{className:"flex-1 p-3 overflow-y-auto",children:[e.jsxs(u,{className:"p-3 mb-3",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(v,{value:m,onChange:s=>N(s.target.value),placeholder:"Search products...",className:"pl-10"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:U.map(s=>e.jsx(a,{onClick:()=>g(s),variant:p===s?"default":"outline",size:"sm",className:"whitespace-nowrap",children:s==="all"?"All":s},s))})]}),R.length===0?e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 gap-2",children:R.map(s=>e.jsxs(u,{onClick:()=>W(s),className:"p-3 cursor-pointer hover:shadow-lg hover:border-purple-500 transition-all active:scale-95",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-2 flex items-center justify-center text-3xl",children:"ðŸ“¦"}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-1 line-clamp-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-bold text-purple-600",children:["â‚¹",s.price]}),e.jsx(F,{variant:s.stock>10?"default":"secondary",className:"text-xs",children:s.stock})]})]},s.id))})]}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-l flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Cart"}),t.length>0&&e.jsxs(a,{onClick:$,variant:"ghost",size:"sm",className:"text-red-600",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),"Clear"]})]}),e.jsx(v,{value:q,onChange:s=>C(s.target.value),placeholder:"Customer name (optional)",className:"text-sm"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cart is empty"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Add products to start"})]}):t.map(s=>e.jsxs(u,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-1",children:s.product.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["â‚¹",s.product.price," each"]})]}),e.jsx(a,{onClick:()=>_(s.product.id),variant:"ghost",size:"sm",className:"text-red-600 h-6 w-6 p-0",children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{onClick:()=>T(s.product.id,-1),size:"sm",variant:"outline",className:"h-7 w-7 p-0",children:e.jsx(ce,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-12 text-center font-medium text-sm",children:s.quantity}),e.jsx(a,{onClick:()=>T(s.product.id,1),size:"sm",variant:"outline",className:"h-7 w-7 p-0",children:e.jsx(ee,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"font-bold text-purple-600",children:["â‚¹",s.total]})]})]},s.product.id))}),t.length>0&&e.jsxs("div",{className:"border-t p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600 w-20",children:"Discount"}),e.jsx(v,{type:"number",value:b,onChange:s=>P(Math.min(100,Math.max(0,Number(s.target.value)))),placeholder:"0",className:"flex-1 h-8 text-sm",min:0,max:100}),e.jsx("span",{className:"text-sm text-gray-600",children:"%"})]}),e.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["â‚¹",z.toFixed(2)]})]}),b>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Discount (",b,"%)"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["-â‚¹",A.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-lg font-bold pt-1 border-t",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-purple-600",children:["â‚¹",h.toFixed(2)]})]})]}),e.jsxs(a,{onClick:X,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Checkout"]})]})]})]}),E&&e.jsx(ne,{total:h,paymentMethod:j,receivedAmount:k,change:M,onMethodChange:x,onAmountChange:S,onConfirm:G,onClose:()=>w(!1)}),O&&e.jsx(ie,{total:h,paymentMethod:j,change:M,customerName:q})]})}function ne({total:l,paymentMethod:r,receivedAmount:t,change:c,onMethodChange:m,onAmountChange:N,onConfirm:p,onClose:g}){const j=[l,Math.ceil(l/100)*100,Math.ceil(l/500)*500,Math.ceil(l/1e3)*1e3];return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50",children:e.jsxs(u,{className:"w-full max-w-md bg-white rounded-t-3xl sm:rounded-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Payment"}),e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700",children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Amount Due"}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:["â‚¹",l.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs(a,{onClick:()=>m("cash"),variant:r==="cash"?"default":"outline",className:"flex-col h-auto py-3",children:[e.jsx(se,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Cash"})]}),e.jsxs(a,{onClick:()=>m("upi"),variant:r==="upi"?"default":"outline",className:"flex-col h-auto py-3",children:[e.jsx(te,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"UPI"})]}),e.jsxs(a,{onClick:()=>m("card"),variant:r==="card"?"default":"outline",className:"flex-col h-auto py-3",children:[e.jsx(D,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Card"})]}),e.jsxs(a,{onClick:()=>m("credit"),variant:r==="credit"?"default":"outline",className:"flex-col h-auto py-3",children:[e.jsx(K,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Credit"})]})]})]}),r==="cash"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Received"}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(v,{type:"number",value:t,onChange:x=>N(Number(x.target.value)),placeholder:"0",className:"pl-10 text-lg font-bold"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:j.map(x=>e.jsxs(a,{onClick:()=>N(x),variant:"outline",size:"sm",children:["â‚¹",x]},x))}),t>=l&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Change to Return"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["â‚¹",c.toFixed(2)]})]})})]})]}),e.jsxs("div",{className:"p-4 border-t flex gap-2",children:[e.jsx(a,{onClick:g,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(a,{onClick:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:r!=="credit"&&t<l,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Confirm Payment"]})]})]})})}function ie({total:l,paymentMethod:r,change:t,customerName:c}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(u,{className:"w-full max-w-sm bg-white rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c?`Thank you, ${c}!`:"Thank you for your purchase!"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["â‚¹",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Method"}),e.jsx(F,{children:r.toUpperCase()})]}),r==="cash"&&t>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Change Returned"}),e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¹",t.toFixed(2)]})]})]}),e.jsxs(a,{className:"w-full mb-2",variant:"outline",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Print Receipt"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Redirecting in 3 seconds..."})]})})}export{be as QuickPOSMode};
