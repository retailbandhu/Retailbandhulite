import{r as c,j as e,C as l,U as P,T,a as m,I as d,B as L,t as R}from"./index-BuzVCwG6.js";import{S as M,L as o}from"./switch-ZJsO4q6v.js";import{T as A,a as I,b as x,c as h}from"./tabs-BXt4s18N.js";import{l as g,g as j,b as k}from"./loyalty-Dkjvmn5t.js";import{A as E}from"./arrow-left-Dcny2vjx.js";import{A as B}from"./award-Cq9C7Pci.js";import{C as u}from"./crown-BpyCADvs.js";import{G as F}from"./gift-CyZrJ20Q.js";import"./index-BV6stW-D.js";function K({onNavigate:N}){const[t,n]=c.useState(g.getConfig()),[r,b]=c.useState([]),[v,y]=c.useState("overview");c.useEffect(()=>{b(g.getAllCustomerLoyalty())},[]);const f=()=>{g.setConfig(t),R.success("Loyalty program settings saved!")},w=r.length,S=r.reduce((s,a)=>s+a.totalPoints,0),C=r.reduce((s,a)=>s+a.lifetimeSpend,0),p=[...r].sort((s,a)=>a.lifetimeSpend-s.lifetimeSpend).slice(0,5);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-orange-500 text-white p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N("dashboard"),className:"p-2 hover:bg-white/20 rounded-lg",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl",children:"Loyalty Program"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Reward your regular customers"})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs(A,{value:v,onValueChange:y,children:[e.jsxs(I,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(x,{value:"overview",children:"Overview"}),e.jsx(x,{value:"customers",children:"Customers"}),e.jsx(x,{value:"settings",children:"Settings"})]}),e.jsxs(h,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),e.jsx("p",{className:"text-2xl",children:w})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-2xl",children:S.toLocaleString()})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl",children:["₹",C.toLocaleString()]})]})]})})]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg mb-4 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-orange-500"}),"Membership Tiers"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.bonusTiers.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border-2",style:{borderColor:s.color},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"w-5 h-5",style:{color:s.color}}),e.jsx("h3",{children:s.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Spend: ₹",s.minSpend.toLocaleString(),"+"]}),e.jsxs(m,{variant:"secondary",children:[s.bonusMultiplier,"x Points"]})]},s.name))})]}),e.jsxs(l,{className:"p-6",children:[e.jsx("h2",{className:"text-lg mb-4",children:"Top Loyalty Members"}),e.jsxs("div",{className:"space-y-3",children:[p.map((s,a)=>{const i=j(s.lifetimeSpend,t);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-orange-500 flex items-center justify-center text-white",children:a+1}),e.jsxs("div",{children:[e.jsx("p",{children:s.customerName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.totalPoints," points • ₹",s.lifetimeSpend.toLocaleString()," spent"]})]})]}),e.jsx(m,{style:{backgroundColor:i.color,color:"white"},children:i.name})]},s.customerId)}),p.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No loyalty members yet. Start rewarding your customers!"})]})]})]}),e.jsx(h,{value:"customers",className:"space-y-4",children:e.jsxs(l,{className:"p-6",children:[e.jsx("h2",{className:"text-lg mb-4",children:"All Loyalty Members"}),e.jsxs("div",{className:"space-y-3",children:[r.map(s=>{const a=j(s.lifetimeSpend,t),i=k(a,t);return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.customerName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Member since ",new Date(s.pointsHistory[s.pointsHistory.length-1]?.date||Date.now()).toLocaleDateString()]})]}),e.jsx(m,{style:{backgroundColor:a.color,color:"white"},children:a.name})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-lg",children:s.totalPoints})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Lifetime Spend"}),e.jsxs("p",{className:"text-lg",children:["₹",s.lifetimeSpend.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Redeemable Value"}),e.jsxs("p",{className:"text-lg",children:["₹",Math.floor(s.totalPoints*t.redeemRate)]})]})]}),i&&e.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 p-2 rounded",children:["Spend ₹",i.amountNeeded.toLocaleString()," more to reach ",i.tier.name," tier"]})]},s.customerId)}),r.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No loyalty members yet"})]})]})}),e.jsxs(h,{value:"settings",className:"space-y-4",children:[e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg",children:"Enable Loyalty Program"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically reward customers with points"})]}),e.jsx(M,{checked:t.enabled,onCheckedChange:s=>n({...t,enabled:s})})]}),t.enabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Points Per ₹100 Spent"}),e.jsx(d,{type:"number",value:t.pointsPerRupee,onChange:s=>n({...t,pointsPerRupee:parseFloat(s.target.value)}),min:"0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Redemption Rate (₹ per 10 points)"}),e.jsx(d,{type:"number",value:t.redeemRate*10,onChange:s=>n({...t,redeemRate:parseFloat(s.target.value)/10}),min:"0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Minimum Purchase for Points (₹)"}),e.jsx(d,{type:"number",value:t.minPurchaseForPoints,onChange:s=>n({...t,minPurchaseForPoints:parseInt(s.target.value)}),min:"0"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Minimum Points to Redeem"}),e.jsx(d,{type:"number",value:t.minPointsToRedeem,onChange:s=>n({...t,minPointsToRedeem:parseInt(s.target.value)}),min:"0"})]})]}),e.jsx(L,{onClick:f,className:"w-full bg-gradient-to-r from-blue-600 to-orange-500",children:"Save Settings"})]})]}),t.enabled&&e.jsxs(l,{className:"p-6 bg-blue-50 border-blue-200",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-blue-600"}),"Example Calculation"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Customer spends ₹1000"}),e.jsxs("p",{children:["• Earns ",1e3/100*t.pointsPerRupee," points (Bronze tier)"]}),e.jsxs("p",{children:["• Can redeem ",t.minPointsToRedeem," points for ₹",Math.floor(t.minPointsToRedeem*t.redeemRate)," discount"]}),e.jsxs("p",{children:["• Silver tier members get ",t.bonusTiers[1].bonusMultiplier,"x points"]})]})]})]})]})})]})}export{K as LoyaltyProgram};
