import{r as o,s as I,j as e,C as c,P as u,B as N,e as A,a as E,I as p,d as P,t as m}from"./index-BuzVCwG6.js";import{L as f,S as b}from"./switch-ZJsO4q6v.js";import{T as _,a as $,b as v,c as w}from"./tabs-BXt4s18N.js";import{A as D}from"./arrow-left-Dcny2vjx.js";import{T as G}from"./triangle-alert-XPxsJ1n0.js";import{T as U}from"./trending-down-tIy2VhUi.js";import"./index-BV6stW-D.js";const y="rb_reorder_settings";function W({onNavigate:S}){const[h,T]=o.useState([]),[l,d]=o.useState({enabled:!0,defaultThreshold:10,autoNotify:!0}),[g,j]=o.useState({});o.useEffect(()=>{T(I.getProducts());const s=localStorage.getItem(y);s&&d(JSON.parse(s));const a=localStorage.getItem("rb_reorder_thresholds");a&&j(JSON.parse(a))},[]);const k=()=>{localStorage.setItem(y,JSON.stringify(l)),m.success("Reorder settings saved!")},C=(s,a)=>{const r={...g,[s]:a};j(r),localStorage.setItem("rb_reorder_thresholds",JSON.stringify(r)),m.success("Threshold updated!")},x=s=>g[s]||l.defaultThreshold,i=h.filter(s=>s.stock<=x(s.id)),R=h.filter(s=>s.stock<=5),O=h.filter(s=>s.stock===0),L=()=>{const s=i.map(n=>`${n.name} - Current: ${n.stock}, Reorder: ${x(n.id)*2} units`).join(`
`),a=new Blob([`REORDER SHOPPING LIST

Generated: ${new Date().toLocaleString()}

${s}`],{type:"text/plain"}),r=URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download=`reorder-list-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r),m.success("Shopping list downloaded!")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-orange-500 text-white p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>S("dashboard"),className:"p-2 hover:bg-white/20 rounded-lg",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl",children:"Reorder Alerts"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Never run out of stock"})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs(_,{defaultValue:"alerts",className:"space-y-4",children:[e.jsxs($,{className:"grid w-full grid-cols-2",children:[e.jsx(v,{value:"alerts",children:"Alerts"}),e.jsx(v,{value:"settings",children:"Settings"})]}),e.jsxs(w,{value:"alerts",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{className:"p-4 border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl",children:O.length})]})]})}),e.jsx(c,{className:"p-4 border-orange-200 bg-orange-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Stock"}),e.jsx("p",{className:"text-2xl",children:R.length})]})]})}),e.jsx(c,{className:"p-4 border-yellow-200 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center",children:e.jsx(u,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"text-2xl",children:i.length})]})]})})]}),i.length>0&&e.jsx("div",{className:"flex gap-3",children:e.jsxs(N,{onClick:L,className:"bg-gradient-to-r from-blue-600 to-orange-500",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Generate Shopping List"]})}),e.jsxs(c,{className:"p-6",children:[e.jsx("h2",{className:"text-lg mb-4",children:"Products Needing Reorder"}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"All products are well stocked!"})]}):e.jsx("div",{className:"space-y-3",children:i.map(s=>{const a=x(s.id),r=s.stock/a*100,t=s.stock===0?"critical":s.stock<=5?"high":"medium";return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{children:s.name}),e.jsx(E,{variant:t==="critical"?"destructive":"secondary",className:t==="high"?"bg-orange-100 text-orange-700":"",children:t==="critical"?"OUT OF STOCK":t==="high"?"CRITICAL":"LOW STOCK"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current Stock: ",s.stock," | Reorder at: ",a]})]}),e.jsxs("p",{className:"text-lg",children:["₹",s.price]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-3",children:e.jsx("div",{className:`h-full transition-all ${t==="critical"?"bg-red-600":t==="high"?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${Math.min(r,100)}%`}})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(f,{className:"text-xs",children:"Reorder Threshold"}),e.jsx(p,{type:"number",value:a,onChange:n=>C(s.id,parseInt(n.target.value)||0),className:"h-8 text-sm",min:"0"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Suggested order: ",e.jsxs("span",{className:"font-medium",children:[a*2," units"]})]})]})]},s.id)})})]})]}),e.jsxs(w,{value:"settings",className:"space-y-4",children:[e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Enable Reorder Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when stock is low"})]}),e.jsx(b,{checked:l.enabled,onCheckedChange:s=>d({...l,enabled:s})})]}),l.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(f,{children:"Default Reorder Threshold"}),e.jsx(p,{type:"number",value:l.defaultThreshold,onChange:s=>d({...l,defaultThreshold:parseInt(s.target.value)||10}),min:"1",className:"mt-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alert when stock falls below this number"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Auto Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically show alerts on dashboard"})]}),e.jsx(b,{checked:l.autoNotify,onCheckedChange:s=>d({...l,autoNotify:s})})]})]}),e.jsx(N,{onClick:k,className:"w-full bg-gradient-to-r from-blue-600 to-orange-500",children:"Save Settings"})]})}),e.jsxs(c,{className:"p-6 bg-blue-50 border-blue-200",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),"Reorder Tips"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("li",{children:"• Set higher thresholds for fast-moving products"}),e.jsx("li",{children:"• Consider supplier lead times when setting thresholds"}),e.jsx("li",{children:"• Review and adjust thresholds based on sales patterns"}),e.jsx("li",{children:"• Generate shopping lists before placing orders"}),e.jsx("li",{children:"• Use custom thresholds for seasonal products"})]})]})]})]})})]})}export{W as ReorderAlerts};
