import{r as x,j as e,B as l,C as h,U as T,T as G,S as V,I as f,a as C,t as v,X as Z}from"./index-BuzVCwG6.js";import{M as D,T as K}from"./textarea-CIDJ-Kcl.js";import{C as z}from"./chevron-left-BxM-u5rR.js";import{P}from"./plus-DQq0th4a.js";import{B as k}from"./building-2-D8Z6J2oU.js";import{T as Q}from"./trending-down-tIy2VhUi.js";import{D as W}from"./download-BE2UR89B.js";import{U as Y}from"./upload-BMrft78B.js";import{S as M}from"./square-pen-DfaAFnfH.js";import{T as E}from"./trash-2-TQVF2hbq.js";import{P as L}from"./phone-nYpol1vA.js";import{M as O}from"./mail-B1SF9EkE.js";import{M as H}from"./map-pin-Zka5iS1N.js";import{C as J}from"./calendar-DrzEjIy2.js";import{I as _}from"./indian-rupee-CBtXWVuN.js";import{C as ee}from"./chevron-right-DLr9pDy8.js";import{S as se}from"./save-C8B5UMFv.js";function we({onNavigate:s}){const[r,o]=x.useState([]),[t,c]=x.useState([]),[i,d]=x.useState(""),[m,S]=x.useState("all"),[R,p]=x.useState(!1),[g,N]=x.useState(null),[A,y]=x.useState(!1);x.useEffect(()=>{X()},[]),x.useEffect(()=>{B()},[i,m,r]);const X=()=>{const a=[{id:"1",name:"Ramesh Kumar",phone:"+91-9876543210",email:"ramesh@gmail.com",type:"customer",address:"Shop 12, Nehru Market, Delhi",balance:5e3,balanceType:"receivable",totalTransactions:45,lastTransaction:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-5184e6).toISOString()},{id:"2",name:"Priya Enterprises",phone:"+91-9876543211",type:"supplier",address:"Warehouse 5, Industrial Area, Gurgaon",gstin:"07AABCU9603R1ZM",balance:12e3,balanceType:"payable",totalTransactions:23,lastTransaction:new Date(Date.now()-432e6).toISOString(),createdAt:new Date(Date.now()-7776e6).toISOString()},{id:"3",name:"Amit Sharma",phone:"+91-9876543212",type:"customer",address:"B-45, Lajpat Nagar, Delhi",balance:0,balanceType:"receivable",totalTransactions:12,lastTransaction:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-2592e6).toISOString()},{id:"4",name:"Sunita Devi",phone:"+91-9876543213",type:"customer",address:"C-78, Karol Bagh, Delhi",balance:2500,balanceType:"receivable",totalTransactions:67,lastTransaction:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-10368e6).toISOString()},{id:"5",name:"Delhi Distributors",phone:"+91-9876543214",email:"info@delhidist.com",type:"supplier",address:"Plot 23, Okhla Industrial Estate",gstin:"07AABCX9603R1ZM",balance:8e3,balanceType:"payable",totalTransactions:34,lastTransaction:new Date(Date.now()-2592e5).toISOString(),createdAt:new Date(Date.now()-15552e6).toISOString()}];o(a)},B=()=>{let a=r;if(m!=="all"&&(a=a.filter(n=>n.type===m)),i){const n=i.toLowerCase();a=a.filter(u=>u.name.toLowerCase().includes(n)||u.phone.includes(n)||u.email?.toLowerCase().includes(n))}c(a)},U=a=>{const n={id:Date.now().toString(),name:a.name||"",phone:a.phone||"",email:a.email,type:a.type||"customer",address:a.address,gstin:a.gstin,balance:0,balanceType:"receivable",totalTransactions:0,createdAt:new Date().toISOString()};o([n,...r]),v.success(`${n.type==="customer"?"Customer":"Supplier"} added successfully!`),p(!1)},$=a=>{if(!g)return;const n=r.map(u=>u.id===g.id?{...u,...a}:u);o(n),v.success("Party updated successfully!"),p(!1),N(null)},I=a=>{confirm("Are you sure you want to delete this party?")&&(o(r.filter(n=>n.id!==a)),v.success("Party deleted successfully!"),A&&g?.id===a&&(y(!1),N(null)))},q=a=>{N(a),y(!0)},w=(()=>{const a=r.filter(j=>j.type==="customer"),n=r.filter(j=>j.type==="supplier"),u=a.reduce((j,b)=>b.balanceType==="receivable"?j+b.balance:j,0),F=n.reduce((j,b)=>b.balanceType==="payable"?j+b.balance:j,0);return{totalCustomers:a.length,totalSuppliers:n.length,totalReceivable:u,totalPayable:F}})();return A&&g?e.jsx(le,{party:g,onBack:()=>{y(!1),N(null)},onEdit:()=>{y(!1),p(!0)},onDelete:I}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-orange-500 text-white p-4 sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{onClick:()=>s("home"),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Party Management"}),e.jsx("p",{className:"text-sm text-white/90",children:"Customers & Suppliers"})]})]}),e.jsxs(l,{onClick:()=>{N(null),p(!0)},size:"sm",className:"bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Add Party"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(h,{className:"bg-white/10 backdrop-blur border-white/20 p-3 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs opacity-90",children:"Customers"})]}),e.jsx("div",{className:"text-2xl font-bold",children:w.totalCustomers}),e.jsxs("div",{className:"text-xs opacity-75 flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"}),"₹",w.totalReceivable.toLocaleString()," to receive"]})]}),e.jsxs(h,{className:"bg-white/10 backdrop-blur border-white/20 p-3 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs opacity-90",children:"Suppliers"})]}),e.jsx("div",{className:"text-2xl font-bold",children:w.totalSuppliers}),e.jsxs("div",{className:"text-xs opacity-75 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),"₹",w.totalPayable.toLocaleString()," to pay"]})]})]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(h,{className:"p-3",children:[e.jsx("div",{className:"flex gap-2 mb-3",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(f,{value:i,onChange:a=>d(a.target.value),placeholder:"Search by name, phone, email...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{onClick:()=>S("all"),variant:m==="all"?"default":"outline",size:"sm",className:"flex-1",children:["All (",r.length,")"]}),e.jsxs(l,{onClick:()=>S("customer"),variant:m==="customer"?"default":"outline",size:"sm",className:"flex-1",children:["Customers (",r.filter(a=>a.type==="customer").length,")"]}),e.jsxs(l,{onClick:()=>S("supplier"),variant:m==="supplier"?"default":"outline",size:"sm",className:"flex-1",children:["Suppliers (",r.filter(a=>a.type==="supplier").length,")"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),"Export"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"Import"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"WhatsApp"]})]}),e.jsx("div",{className:"space-y-3",children:t.length===0?e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:i?"No parties found":"No parties yet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i?"Try a different search term":"Add your first customer or supplier to get started"}),!i&&e.jsxs(l,{onClick:()=>p(!0),children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Add Party"]})]}):t.map(a=>e.jsx(ae,{party:a,onView:()=>q(a),onEdit:()=>{N(a),p(!0)},onDelete:()=>I(a.id)},a.id))})]}),R&&e.jsx(te,{party:g,onSave:g?$:U,onClose:()=>{p(!1),N(null)}})]})}function ae({party:s,onView:r,onEdit:o,onDelete:t}){const c=i=>{const d=Date.now()-new Date(i).getTime(),m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":`${m} days ago`};return e.jsxs(h,{className:"p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:s.name}),e.jsx(C,{variant:s.type==="customer"?"default":"secondary",className:"text-xs",children:s.type==="customer"?"Customer":"Supplier"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:s.email})]}),s.lastTransaction&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsxs("span",{children:["Last txn: ",c(s.lastTransaction)]})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(l,{onClick:o,variant:"ghost",size:"sm",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx(l,{onClick:t,variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50",children:e.jsx(E,{className:"w-4 h-4"})})]})]}),s.balance>0&&e.jsx("div",{className:`p-3 rounded-lg mb-3 ${s.balanceType==="receivable"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:`w-4 h-4 ${s.balanceType==="receivable"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.balanceType==="receivable"?"To Receive":"To Pay"})]}),e.jsxs("span",{className:`text-lg font-bold ${s.balanceType==="receivable"?"text-green-600":"text-red-600"}`,children:["₹",s.balance.toLocaleString()]})]})}),e.jsxs(l,{onClick:r,variant:"outline",size:"sm",className:"w-full",children:["View Details",e.jsx(ee,{className:"w-4 h-4 ml-auto"})]})]})}function te({party:s,onSave:r,onClose:o}){const[t,c]=x.useState({name:s?.name||"",phone:s?.phone||"",email:s?.email||"",type:s?.type||"customer",address:s?.address||"",gstin:s?.gstin||""}),i=()=>{if(!t.name.trim()){v.error("Please enter party name");return}if(!t.phone.trim()){v.error("Please enter phone number");return}r(t)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50",children:e.jsxs(h,{className:"w-full max-w-lg bg-white rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:s?"Edit Party":"Add Party"}),e.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Party Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(l,{onClick:()=>c({...t,type:"customer"}),variant:t.type==="customer"?"default":"outline",className:"w-full",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Customer"]}),e.jsxs(l,{onClick:()=>c({...t,type:"supplier"}),variant:t.type==="supplier"?"default":"outline",className:"w-full",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Supplier"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(f,{value:t.name,onChange:d=>c({...t,name:d.target.value}),placeholder:"Enter party name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(f,{value:t.phone,onChange:d=>c({...t,phone:d.target.value}),placeholder:"+91-XXXXXXXXXX",type:"tel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (Optional)"}),e.jsx(f,{value:t.email,onChange:d=>c({...t,email:d.target.value}),placeholder:"email@example.com",type:"email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address (Optional)"}),e.jsx(K,{value:t.address,onChange:d=>c({...t,address:d.target.value}),placeholder:"Enter complete address",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GSTIN (Optional)"}),e.jsx(f,{value:t.gstin,onChange:d=>c({...t,gstin:d.target.value.toUpperCase()}),placeholder:"07AABCU9603R1ZM",maxLength:15})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t p-4 flex gap-2",children:[e.jsx(l,{onClick:o,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),s?"Update":"Add"," Party"]})]})]})})}function le({party:s,onBack:r,onEdit:o,onDelete:t}){const c=[{id:"1",date:"2024-12-08",type:"Sale",amount:5e3,status:"paid"},{id:"2",date:"2024-12-05",type:"Sale",amount:3e3,status:"pending"},{id:"3",date:"2024-12-01",type:"Sale",amount:2500,status:"paid"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-orange-500 text-white p-4 sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{onClick:r,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:s.name}),e.jsx(C,{variant:"secondary",className:"mt-1",children:s.type==="customer"?"Customer":"Supplier"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{onClick:o,size:"sm",className:"bg-white text-blue-600 hover:bg-blue-50",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx(l,{onClick:()=>t(s.id),size:"sm",className:"bg-red-600 text-white hover:bg-red-700",children:e.jsx(E,{className:"w-4 h-4"})})]})]}),s.balance>0&&e.jsx(h,{className:"bg-white/10 backdrop-blur border-white/20 p-4 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm opacity-90 mb-1",children:s.balanceType==="receivable"?"Amount to Receive":"Amount to Pay"}),e.jsxs("div",{className:"text-3xl font-bold",children:["₹",s.balance.toLocaleString()]})]})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("div",{className:"font-medium text-gray-900",children:s.phone})]}),e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(D,{className:"w-4 h-4"})})]}),s.email&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("div",{className:"font-medium text-gray-900",children:s.email})]})]}),s.address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Address"}),e.jsx("div",{className:"font-medium text-gray-900",children:s.address})]})]}),s.gstin&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"GSTIN"}),e.jsx("div",{className:"font-medium text-gray-900 font-mono",children:s.gstin})]})]})]})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Transaction Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.totalTransactions}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Transactions"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.lastTransaction?new Date(s.lastTransaction).toLocaleDateString():"-"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Last Transaction"})]})]})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-2",children:c.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:i.type}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(i.date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900",children:["₹",i.amount.toLocaleString()]}),e.jsx(C,{variant:i.status==="paid"?"default":"secondary",className:"text-xs",children:i.status})]})]},i.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(l,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"New Transaction"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Send Message"]})]})]})]})}export{we as PartyManagement};
