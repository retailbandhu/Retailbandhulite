import{c as h,s as t,j as e,C as n,B as d,t as a}from"./index-V23vquzg.js";import{A as f,a as v}from"./alert-C9NKhkTB.js";import{l as i}from"./logger-By8ekZtJ.js";import{A as k}from"./arrow-left-BzwCOdhx.js";import{D as w}from"./database-Dd6rOsDw.js";import{D as o}from"./download-CYNHsznw.js";import{U as m}from"./upload-DmmqT19f.js";import{C}from"./circle-alert-B6dtfcpg.js";import{C as E}from"./circle-check-big-C5JSCYiK.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],B=h("file-json",S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],x=h("file-spreadsheet",V);function R({onNavigate:p}){const u=()=>{try{const s=t.exportToJSON();t.downloadJSON(s,"retail-bandhu-backup"),a.success("Data exported successfully!")}catch(s){a.error("Failed to export data"),i.error(s)}},j=()=>{try{const s=t.getProducts();if(s.length===0){a.error("No products to export");return}t.generateExcelCSV(s,"products"),a.success("Products exported to CSV!")}catch(s){a.error("Failed to export products"),i.error(s)}},g=()=>{try{const s=t.getCustomers();if(s.length===0){a.error("No customers to export");return}t.generateExcelCSV(s,"customers"),a.success("Customers exported to CSV!")}catch(s){a.error("Failed to export customers"),i.error(s)}},N=()=>{try{const s=t.getBills();if(s.length===0){a.error("No bills to export");return}const c=s.map(r=>({billNumber:r.billNumber,date:r.date,customerName:r.customerName||"Walk-in",totalAmount:r.total,itemCount:r.items.length,paymentMethod:r.paymentMethod||"Cash"}));t.generateExcelCSV(c,"bills"),a.success("Bills exported to CSV!")}catch(s){a.error("Failed to export bills"),i.error(s)}},b=async s=>{const c=s.target.files?.[0];if(c)try{const r=await t.importFromJSON(c);if(!r.version||!r.timestamp)throw new Error("Invalid backup file format");window.confirm("This will replace all current data. Are you sure you want to continue?")&&(t.restoreBackup(r),a.success("Data restored successfully! Please refresh the page."),setTimeout(()=>window.location.reload(),2e3))}catch(r){a.error("Failed to import data: "+r.message),i.error(r)}finally{s.target.value=""}},l={products:t.getProducts().length,customers:t.getCustomers().length,bills:t.getBills().length,parties:t.getParties().length,khataEntries:t.getKhataEntries().length,expenses:t.getExpenses().length},y=Object.values(l).reduce((s,c)=>s+c,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-orange-500 text-white p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>p("settings"),className:"p-2 hover:bg-white/20 rounded-lg",children:e.jsx(k,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl",children:"Data Backup & Export"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Secure your business data"})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg",children:"Your Data Summary"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y," total records"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Products"}),e.jsx("p",{className:"text-2xl",children:l.products})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customers"}),e.jsx("p",{className:"text-2xl",children:l.customers})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bills"}),e.jsx("p",{className:"text-2xl",children:l.bills})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Parties"}),e.jsx("p",{className:"text-2xl",children:l.parties})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Khata Entries"}),e.jsx("p",{className:"text-2xl",children:l.khataEntries})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expenses"}),e.jsx("p",{className:"text-2xl",children:l.expenses})]})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),"Export Data"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Full Backup (JSON)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete backup of all your data"})]})]}),e.jsxs(d,{onClick:u,variant:"outline",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-11",children:"Recommended for complete backup and restore"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Products (CSV)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Export products to Excel/CSV"})]})]}),e.jsxs(d,{onClick:j,variant:"outline",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-11",children:"Open in Excel, Google Sheets, or any spreadsheet app"})]}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Customers (CSV)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Export customer list"})]})]}),e.jsxs(d,{onClick:g,variant:"outline",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Bills History (CSV)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Export all bills for accounting"})]})]}),e.jsxs(d,{onClick:N,variant:"outline",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Export"]})]})})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),"Import / Restore Data"]}),e.jsxs(f,{className:"mb-4",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx(v,{children:"Importing data will replace all current data. Make sure to export a backup first!"})]}),e.jsxs("div",{className:"p-4 border-2 border-dashed rounded-lg text-center",children:[e.jsx("input",{type:"file",accept:".json",onChange:b,className:"hidden",id:"import-file"}),e.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer block",children:[e.jsx(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"mb-2",children:"Click to select backup file"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Only JSON backup files are supported"})]})]})]}),e.jsxs(n,{className:"p-6 bg-green-50 border-green-200",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-green-600"}),"Backup Best Practices"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("li",{children:"• Export a full backup regularly (at least once a week)"}),e.jsx("li",{children:"• Keep multiple backup copies in different locations"}),e.jsx("li",{children:"• Export CSV files for easy data analysis in Excel"}),e.jsx("li",{children:"• Test your backup by importing it on another device"}),e.jsx("li",{children:"• Always backup before making major changes"})]})]})]})]})}export{R as DataBackup};
