import{c as Q,r as l,j as e,B as a,K as P,C as n,I as U,S as V,t as g,b as Y,X as z,a as H,e as _}from"./index-V23vquzg.js";import{C as W}from"./chevron-left-C4U8rtFH.js";import{H as E}from"./history-CO8mchEd.js";import{C as T}from"./camera-BNrvqFzD.js";import{S as M}from"./scan-BKf5dbfM.js";import{C as F}from"./circle-check-Bf2m_ilx.js";import{C as A}from"./circle-alert-B6dtfcpg.js";import{P as X}from"./plus-W1R3slHK.js";import{S as Z}from"./square-pen-C0nwl_1g.js";import{T as G}from"./trash-2-JdIgAFQB.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ee=Q("box",J);function he({onNavigate:s,products:r,onProductScanned:o}){const[d,i]=l.useState(!1),[h,w]=l.useState("camera"),[N,p]=l.useState(""),[y,j]=l.useState(null),[c,k]=l.useState([]),[C,f]=l.useState(!1),[D,b]=l.useState(!1),u={"8901058843729":"1","8901396311720":"2","8901063100602":"3","8902719001234":"4","8901234567890":"5"};l.useEffect(()=>{r.forEach((t,m)=>{u[`890100000${m+1e3}`]||(u[`890100000${m+1e3}`]=t.id)})},[r]);const $=()=>{i(!0),setTimeout(()=>{const t=Object.keys(u),m=t[Math.floor(Math.random()*t.length)];v(m),i(!1)},2e3)},S=()=>{if(!N.trim()){g.error("Please enter a barcode");return}v(N),p("")},v=t=>{const m=u[t],x=r.find(R=>R.id===m),O={id:Date.now().toString(),code:t,product:x,time:new Date().toLocaleTimeString(),status:x?"found":"not-found"};k([O,...c]),j(x||null),b(!0),x?(g.success(`Product found: ${x.name}`),o&&o(x)):g.error("Product not found in database")},q=()=>{y&&(s("inventory"),g.info("Navigate to inventory to update stock"))},K=()=>{y&&s("quick-pos")},L=()=>{confirm("Clear scan history?")&&(k([]),g.success("History cleared"))};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{onClick:()=>s("dashboard"),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Barcode Scanner"}),e.jsx("p",{className:"text-sm text-white/90",children:"Quick Product Lookup"})]})]}),e.jsxs(a,{onClick:()=>f(!0),size:"sm",className:"bg-white text-indigo-600 hover:bg-indigo-50",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),"History"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{onClick:()=>w("camera"),variant:h==="camera"?"secondary":"ghost",size:"sm",className:h==="camera"?"bg-white text-indigo-600 flex-1":"text-white hover:bg-white/20 flex-1",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Camera Scan"]}),e.jsxs(a,{onClick:()=>w("manual"),variant:h==="manual"?"secondary":"ghost",size:"sm",className:h==="manual"?"bg-white text-indigo-600 flex-1":"text-white hover:bg-white/20 flex-1",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Manual Entry"]})]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[h==="camera"?e.jsxs(n,{className:"p-6",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl flex flex-col items-center justify-center relative overflow-hidden border-2 border-dashed border-indigo-300",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 animate-pulse"}),e.jsx(M,{className:"w-24 h-24 text-indigo-600 animate-bounce mb-4"}),e.jsx("p",{className:"font-medium text-indigo-900",children:"Scanning..."}),e.jsx("p",{className:"text-sm text-indigo-600",children:"Point camera at barcode"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-indigo-600 to-transparent animate-scan"})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-24 h-24 text-indigo-400 mb-4"}),e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:"Ready to Scan"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:"Position barcode within the frame"}),e.jsxs(a,{onClick:$,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Start Scanning"]})]})}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 text-sm mb-2",children:"ðŸ“± Scanning Tips:"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Hold steady and ensure good lighting"}),e.jsx("li",{children:"â€¢ Keep barcode flat and visible"}),e.jsx("li",{children:"â€¢ Try different angles if not detecting"})]})]})]}):e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(P,{className:"w-10 h-10 text-indigo-600"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Manual Barcode Entry"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Type or paste the barcode number"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode Number"}),e.jsx(U,{value:N,onChange:t=>p(t.target.value),onKeyPress:t=>t.key==="Enter"&&S(),placeholder:"Enter barcode (e.g., 8901058843729)",className:"text-center text-lg tracking-wider font-mono",autoFocus:!0})]}),e.jsxs(a,{onClick:S,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Search Product"]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium text-purple-900 text-sm mb-2",children:"ðŸ§ª Test Barcodes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(u).slice(0,3).map(t=>e.jsx(a,{onClick:()=>{p(t),v(t)},variant:"outline",size:"sm",className:"text-xs font-mono",children:t},t))})]})]}),c.length>0&&!C&&e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Recent Scans"}),e.jsx(a,{onClick:()=>f(!0),variant:"ghost",size:"sm",children:"View All"})]}),e.jsx("div",{className:"space-y-2",children:c.slice(0,3).map(t=>e.jsx(B,{scan:t,onProductClick:()=>{j(t.product||null),b(!0)}},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(n,{className:"p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:c.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Scans"})]}),e.jsxs(n,{className:"p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.filter(t=>t.status==="found").length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Found"})]}),e.jsxs(n,{className:"p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.filter(t=>t.status==="not-found").length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Not Found"})]})]}),e.jsxs(n,{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-indigo-600"}),"How it Works"]}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Scan product barcodes to instantly lookup details"}),e.jsx("li",{children:"â€¢ Add scanned products directly to billing"}),e.jsx("li",{children:"â€¢ Update inventory with quick stock entry"}),e.jsx("li",{children:"â€¢ Track scan history for analytics"})]})]})]}),D&&e.jsx(se,{product:y,onClose:()=>{b(!1),j(null)},onAddToCart:K,onUpdateInventory:q}),C&&e.jsx(te,{history:c,onClose:()=>f(!1),onClear:L,onProductClick:t=>{j(t),f(!1),b(!0)}})]})}function B({scan:s,onProductClick:r}){return e.jsx(n,{className:`p-3 cursor-pointer hover:shadow-md transition-shadow ${s.status==="found"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,onClick:s.product?r:void 0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s.status==="found"?"bg-green-100":"bg-red-100"}`,children:s.status==="found"?e.jsx(F,{className:"w-5 h-5 text-green-600"}):e.jsx(A,{className:"w-5 h-5 text-red-600"})}),e.jsx("div",{className:"flex-1 min-w-0",children:s.product?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-1",children:s.product.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["â‚¹",s.product.price," â€¢ Stock: ",s.product.stock]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-red-900 text-sm",children:"Product Not Found"}),e.jsx("p",{className:"text-xs text-red-600 font-mono",children:s.code})]})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),s.time]})})]})})}function se({product:s,onClose:r,onAddToCart:o,onUpdateInventory:d}){return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50",children:e.jsxs(n,{className:"w-full max-w-md bg-white rounded-t-3xl sm:rounded-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Product Details"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"text-3xl font-bold text-indigo-600 mb-2",children:["â‚¹",s.price]}),e.jsx(H,{variant:s.stock>10?"default":s.stock>0?"secondary":"outline",className:s.stock>10?"bg-green-500":s.stock>0?"bg-yellow-500":"bg-red-500",children:s.stock>0?`${s.stock} in stock`:"Out of stock"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Product ID"}),e.jsx("span",{className:"font-mono text-sm font-medium",children:s.id})]}),s.category&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category"}),e.jsx(H,{variant:"secondary",children:s.category})]})]})]}),e.jsxs("div",{className:"p-4 border-t space-y-2",children:[e.jsxs(a,{onClick:o,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700",disabled:s.stock===0,children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Add to Cart & Checkout"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(a,{onClick:d,variant:"outline",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Update Stock"]}),e.jsx(a,{onClick:r,variant:"outline",children:"Close"})]})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx(n,{className:"w-full max-w-md bg-white rounded-2xl p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"w-10 h-10 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This barcode is not registered in your inventory"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{onClick:r,variant:"outline",className:"flex-1",children:"Close"}),e.jsxs(a,{onClick:d,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Add to Inventory"]})]})]})})})}function te({history:s,onClose:r,onClear:o,onProductClick:d}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50",children:e.jsxs(n,{className:"w-full max-w-lg bg-white rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Scan History"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," total scans"]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.length>0&&e.jsx(a,{onClick:o,variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(z,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"p-4 space-y-2",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No scan history yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Scanned items will appear here"})]}):s.map(i=>e.jsx(B,{scan:i,onProductClick:()=>i.product&&d(i.product)},i.id))})]})})}const I=document.createElement("style");I.textContent=`
  @keyframes scan {
    0% { transform: translateY(0); }
    100% { transform: translateY(400px); }
  }
  .animate-scan {
    animation: scan 2s linear infinite;
  }
`;document.head.appendChild(I);export{he as BarcodeScanner};
